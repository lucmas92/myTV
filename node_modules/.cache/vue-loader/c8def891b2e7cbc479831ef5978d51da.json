{"remainingRequest":"/Users/lucmas/WebstormProjects/myTV/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lucmas/WebstormProjects/myTV/src/components/Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lucmas/WebstormProjects/myTV/src/components/Home.vue","mtime":1641574981690},{"path":"/Users/lucmas/WebstormProjects/myTV/node_modules/cache-loader/dist/cjs.js","mtime":1641338268303},{"path":"/Users/lucmas/WebstormProjects/myTV/node_modules/babel-loader/lib/index.js","mtime":1641338267663},{"path":"/Users/lucmas/WebstormProjects/myTV/node_modules/cache-loader/dist/cjs.js","mtime":1641338268303},{"path":"/Users/lucmas/WebstormProjects/myTV/node_modules/vue-loader/lib/index.js","mtime":1641338268014}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBQYWdpbmF0aW9uIGZyb20gIkAvY29tcG9uZW50cy9QYWdpbmF0aW9uIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnSG9tZScsCiAgY29tcG9uZW50czoge1BhZ2luYXRpb259LAogIGRhdGE6IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB7CiAgICAgIGNhbmFsaTogW10sCiAgICAgIHN0YXNlcmE6IFtdLAogICAgICBjdXJyZW50X2RhdGU6IG51bGwsCiAgICAgIHRvdGFsX2VsZW1lbnRzOiAxLAogICAgICBwYWdlOiBudWxsCiAgICB9CiAgfSwKICB1cGRhdGVkKCl7CiAgICB0aGlzLnBhZ2UgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY3VycmVudF9wYWdlJyk7CiAgICBpZiAodGhpcy5wYWdlID09IG51bGwpIHsKICAgICAgdGhpcy5wYWdlID0gMTsKICAgIH0KICB9LAogIGJlZm9yZU1vdW50KCkgewogICAgdGhpcy5sb2FkKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBsb2FkKCkgewoKICAgICAgY29uc3QgY3VycmVudCA9IG5ldyBEYXRlKCk7CiAgICAgIHRoaXMuY3VycmVudF9kYXRlID0gYCR7Y3VycmVudC5nZXREYXRlKCl9LSR7Y3VycmVudC5nZXRNb250aCgpICsgMX0tJHtjdXJyZW50LmdldEZ1bGxZZWFyKCl9YDsKCiAgICAgIGNvbnN0IGtleSA9ICdjYW5hbGlfJyArIHRoaXMuY3VycmVudF9kYXRlOwogICAgICBjb25zdCBrZXkyID0gJ3N0YXNlcmFfJyArIHRoaXMuY3VycmVudF9kYXRlOwoKICAgICAgbGV0IGNhbmFsaSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7CiAgICAgIGxldCBzdGFzZXJhID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5Mik7CiAgICAgIGlmIChjYW5hbGkgIT0gbnVsbCAmJiBzdGFzZXJhICE9IG51bGwpIHsKICAgICAgICB0aGlzLmNhbmFsaSA9IEpTT04ucGFyc2UoY2FuYWxpKQogICAgICAgIHRoaXMuc3Rhc2VyYSA9IEpTT04ucGFyc2Uoc3Rhc2VyYSkKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCB1cmwgPSAiaHR0cHM6Ly9lcGduZXcuZ3VpZGF0dm9nZ2kuaXQvMCI7CiAgICAgICAgY29uc3QgcmVxdWVzdE9wdGlvbnMgPSB7CiAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycwogICAgICAgIH07CiAgICAgICAgZmV0Y2godXJsLCByZXF1ZXN0T3B0aW9ucykKICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKQogICAgICAgICAgICAudGhlbihkYXRhID0+IHsKICAgICAgICAgICAgICB0aGlzLmNhbmFsaSA9IGRhdGFbJ2NhbmFsaSddWzBdWydjYW5hbGknXQogICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkodGhpcy5jYW5hbGkpKTsKICAgICAgICAgICAgICB0aGlzLnN0YXNlcmEgPSBkYXRhWydzdGFzZXJhJ11bMF1bJ2NhbmFsaSddCiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5MiwgSlNPTi5zdHJpbmdpZnkodGhpcy5zdGFzZXJhKSk7CiAgICAgICAgICAgIH0pOwogICAgICB9CgogICAgICB0aGlzLnRvdGFsX2VsZW1lbnRzID0gdGhpcy5zdGFzZXJhLmxlbmd0aDsKICAgICAgbGV0IHBhZ2UgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY3VycmVudF9wYWdlJyk7CiAgICAgIGlmIChwYWdlID09IG51bGwpIHsKICAgICAgICBwYWdlID0gMTsKICAgICAgfQogICAgICB0aGlzLnN0YXNlcmEgPSB0aGlzLnN0YXNlcmEuc3BsaWNlKDAgKyAoMTAgKiAodGhpcy5wYWdlIC0gMSkpLCAxMCk7CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <div class=\"flex flex-row w-full overflow-auto overflow-x-scroll\" v-if=\"canali\">\n      <section class=\"w-full bg-gray-800 py-4 channels\" v-for=\"(canale) in canali\" :key=\"canale['canale']['number']\">\n        <div class=\"w-24 lg:w-36 xl:w-40 flex flex-col justify-center items-center border-black\">\n          <img :src=\"'https://loghi.guidatvoggi.it/w/' + canale['canale']['logo']\" class=\"h-8 mb-3\" alt=\"\">\n        </div>\n      </section>\n    </div>\n    <div class=\"flex flex-col gap-6\" v-if=\"stasera\">\n      <pagination @page_changed=\"load\" :n_elements=\"total_elements\"></pagination>\n      <section class=\"channel\" v-for=\"(channel,index) in stasera\" :key=\"channel['canale']['number']\">\n        <div class=\"px-4 mx-auto sm:max-w-xl md:max-w-full lg:max-w-screen-xl md:px-24 lg:px-8 py-5 lg:py-10\">\n          <div\n              class=\"flex flex-col max-w-screen-lg overflow-hidden bg-gray-200 border rounded shadow-sm lg:flex-row sm:mx-auto\">\n            <div class=\"relative lg:w-1/2\">\n              <!--        <img src=\"https://images.pexels.com/photos/3182812/pexels-photo-3182812.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=750&amp;w=1260\" alt=\"\" class=\"object-cover w-full lg:absolute h-80 lg:h-full\" />-->\n              <img :src=\"channel['prog']['image']\" alt=\"\" class=\"object-cover w-full lg:absolute h-80 lg:h-full\"/>\n              <svg class=\"absolute top-0 right-0 hidden h-full text-gray-200 lg:inline-block\" viewBox=\"0 0 20 104\"\n                   fill=\"currentColor\">\n                <polygon points=\"17.3036738 5.68434189e-14 20 5.68434189e-14 20 104 0.824555778 104\"></polygon>\n              </svg>\n            </div>\n            <div class=\"flex flex-col justify-center p-8 bg-gray-200 lg:p-16 lg:pl-10 lg:w-1/2\">\n              <div>\n                <p class=\"inline-block py-px mb-4 text-xs font-semibold tracking-wider text-teal-900 uppercase rounded-full bg-teal-accent-400\">\n                  <img :src=\"'https://loghi.guidatvoggi.it/b/' + channel['canale']['logo']\" class=\"h-8 mb-3\" alt=\"\">\n\n                  {{ getStartTime(channel['prog']['inizio']) }} - {{ getStartTime(channel['prog']['fine']) }}\n                </p>\n              </div>\n              <h5 class=\"mb-3 text-3xl font-extrabold leading-none sm:text-4xl\">\n                {{ channel['prog']['title'] }}\n              </h5>\n              <p class=\"mb-5 text-gray-800\">\n                {{ channel['prog']['description'] | truncate(300) }}\n              </p>\n              <div class=\"flex items-center\">\n                <router-link :to=\"'/channel/'+(parseInt(index) + parseInt(10*(page-1)))\"\n                             class=\"inline-flex items-center justify-center h-12 px-6 mr-6 font-medium tracking-wide text-black bg-indigo-200 transition duration-200 rounded shadow-md focus:shadow-outline focus:outline-none\"\n                >\n                  Read more\n                </router-link>\n                <a target=\"_blank\" v-if=\"channel['prog']['trailer']\"\n                   :href=\"'https://www.youtube.com/watch?v=' + channel['prog']['trailer']['id']\" aria-label=\"\"\n                   class=\"inline-flex items-center font-semibold\">\n                  Trailer\n                  <svg class=\"inline-block w-3 ml-2\" fill=\"currentColor\" viewBox=\"0 0 12 12\">\n                    <path\n                        d=\"M9.707,5.293l-5-5A1,1,0,0,0,3.293,1.707L7.586,6,3.293,10.293a1,1,0,1,0,1.414,1.414l5-5A1,1,0,0,0,9.707,5.293Z\"></path>\n                  </svg>\n                </a>\n              </div>\n            </div>\n          </div>\n        </div>\n\n      </section>\n      <pagination v-if=\"stasera.length > 3\" @page_changed=\"load\" :n_elements=\"total_elements\"></pagination>\n    </div>\n\n\n  </div>\n</template>\n\n<script>\nimport Pagination from \"@/components/Pagination\";\n\nexport default {\n  name: 'Home',\n  components: {Pagination},\n  data: function () {\n    return {\n      canali: [],\n      stasera: [],\n      current_date: null,\n      total_elements: 1,\n      page: null\n    }\n  },\n  updated(){\n    this.page = localStorage.getItem('current_page');\n    if (this.page == null) {\n      this.page = 1;\n    }\n  },\n  beforeMount() {\n    this.load();\n  },\n  methods: {\n    load() {\n\n      const current = new Date();\n      this.current_date = `${current.getDate()}-${current.getMonth() + 1}-${current.getFullYear()}`;\n\n      const key = 'canali_' + this.current_date;\n      const key2 = 'stasera_' + this.current_date;\n\n      let canali = localStorage.getItem(key);\n      let stasera = localStorage.getItem(key2);\n      if (canali != null && stasera != null) {\n        this.canali = JSON.parse(canali)\n        this.stasera = JSON.parse(stasera)\n      } else {\n        const url = \"https://epgnew.guidatvoggi.it/0\";\n        const requestOptions = {\n          method: 'POST',\n          headers: this.headers\n        };\n        fetch(url, requestOptions)\n            .then(response => response.json())\n            .then(data => {\n              this.canali = data['canali'][0]['canali']\n              localStorage.setItem(key, JSON.stringify(this.canali));\n              this.stasera = data['stasera'][0]['canali']\n              localStorage.setItem(key2, JSON.stringify(this.stasera));\n            });\n      }\n\n      this.total_elements = this.stasera.length;\n      let page = localStorage.getItem('current_page');\n      if (page == null) {\n        page = 1;\n      }\n      this.stasera = this.stasera.splice(0 + (10 * (this.page - 1)), 10);\n    }\n  }\n}\n</script>"]}]}