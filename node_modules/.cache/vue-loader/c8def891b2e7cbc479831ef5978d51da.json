{"remainingRequest":"/Users/lucmas/WebstormProjects/myTV/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lucmas/WebstormProjects/myTV/src/components/Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lucmas/WebstormProjects/myTV/src/components/Home.vue","mtime":1641759266946},{"path":"/Users/lucmas/WebstormProjects/myTV/node_modules/cache-loader/dist/cjs.js","mtime":1641338268303},{"path":"/Users/lucmas/WebstormProjects/myTV/node_modules/babel-loader/lib/index.js","mtime":1641338267663},{"path":"/Users/lucmas/WebstormProjects/myTV/node_modules/cache-loader/dist/cjs.js","mtime":1641338268303},{"path":"/Users/lucmas/WebstormProjects/myTV/node_modules/vue-loader/lib/index.js","mtime":1641338268014}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBQYWdpbmF0aW9uIGZyb20gIkAvY29tcG9uZW50cy9QYWdpbmF0aW9uIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnSG9tZScsCiAgY29tcG9uZW50czogeyBQYWdpbmF0aW9ufSwKICBkYXRhOiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gewogICAgICBjYW5hbGk6IFtdLAogICAgICBzdGFzZXJhOiBbXSwKICAgICAgY3VycmVudF9kYXRlOiBudWxsLAogICAgICB0b3RhbF9lbGVtZW50czogMSwKICAgICAgcGFnZTogbnVsbAogICAgfQogIH0sCiAgdXBkYXRlZCgpIHsKICAgIHRoaXMucGFnZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjdXJyZW50X3BhZ2UnKTsKICAgIGlmICh0aGlzLnBhZ2UgPT0gbnVsbCkgewogICAgICB0aGlzLnBhZ2UgPSAxOwogICAgfQogIH0sCiAgYmVmb3JlTW91bnQoKSB7CiAgICB0aGlzLmxvYWQoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGxvYWQoKSB7CgogICAgICBjb25zdCBjdXJyZW50ID0gbmV3IERhdGUoKTsKICAgICAgdGhpcy5jdXJyZW50X2RhdGUgPSBgJHtjdXJyZW50LmdldERhdGUoKX0tJHtjdXJyZW50LmdldE1vbnRoKCkgKyAxfS0ke2N1cnJlbnQuZ2V0RnVsbFllYXIoKX1gOwoKICAgICAgY29uc3Qga2V5ID0gJ2NhbmFsaV8nICsgdGhpcy5jdXJyZW50X2RhdGU7CiAgICAgIGNvbnN0IGtleTIgPSAncHJpbWFfc2VyYXRhXycgKyB0aGlzLmN1cnJlbnRfZGF0ZTsKICAgICAgY29uc3Qga2V5MyA9ICdzZWNvbmRhX3NlcmF0YV8nICsgdGhpcy5jdXJyZW50X2RhdGU7CgogICAgICBsZXQgY2FuYWxpID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTsKICAgICAgbGV0IHN0YXNlcmEgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkyKTsKICAgICAgaWYgKGNhbmFsaSAhPSBudWxsICYmIHN0YXNlcmEgIT0gbnVsbCkgewogICAgICAgIHRoaXMuY2FuYWxpID0gSlNPTi5wYXJzZShjYW5hbGkpCiAgICAgICAgdGhpcy5zdGFzZXJhID0gSlNPTi5wYXJzZShzdGFzZXJhKQogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IHVybCA9ICJodHRwczovL2VwZ25ldy5ndWlkYXR2b2dnaS5pdC8wIjsKICAgICAgICBjb25zdCByZXF1ZXN0T3B0aW9ucyA9IHsKICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzCiAgICAgICAgfTsKICAgICAgICBmZXRjaCh1cmwsIHJlcXVlc3RPcHRpb25zKQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpCiAgICAgICAgICAgIC50aGVuKGRhdGEgPT4gewogICAgICAgICAgICAgIHRoaXMuY2FuYWxpID0gZGF0YVsnY2FuYWxpJ11bMF1bJ2NhbmFsaSddCiAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeSh0aGlzLmNhbmFsaSkpOwogICAgICAgICAgICAgIHRoaXMuc3Rhc2VyYSA9IGRhdGFbJ3N0YXNlcmEnXVswXVsnY2FuYWxpJ10KICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXkyLCBKU09OLnN0cmluZ2lmeSh0aGlzLnN0YXNlcmEpKTsKICAgICAgICAgICAgICBsZXQgc2Vjb25kYV9zZXJhdGEgPSBkYXRhWydzZWNvbmRhLXNlcmF0YSddWzBdWydjYW5hbGknXQogICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleTMsIEpTT04uc3RyaW5naWZ5KHNlY29uZGFfc2VyYXRhKSk7CiAgICAgICAgICAgIH0pOwogICAgICB9CgogICAgICB0aGlzLnRvdGFsX2VsZW1lbnRzID0gdGhpcy5zdGFzZXJhLmxlbmd0aDsKICAgICAgbGV0IHBhZ2UgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnY3VycmVudF9wYWdlJyk7CiAgICAgIGlmIChwYWdlID09IG51bGwpIHsKICAgICAgICBwYWdlID0gMTsKICAgICAgfQogICAgICB0aGlzLnN0YXNlcmEgPSB0aGlzLnN0YXNlcmEuc3BsaWNlKDAgKyAoMTAgKiAocGFnZSAtIDEpKSwgMTApOwogICAgfQogIH0KfQo="},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <div class=\"flex flex-col gap-6\" v-if=\"stasera\">\n<!--      <pagination @page_changed=\"load\" :n_elements=\"total_elements\"></pagination>-->\n      <section class=\"channel\" v-for=\"(channel,index) in stasera\" :key=\"channel['canale']['number']\">\n        <div class=\"px-4 mx-auto sm:max-w-xl md:max-w-full lg:max-w-screen-xl md:px-24 lg:px-8 py-5 lg:py-10\">\n          <div\n              class=\"flex flex-col overflow-hidden bg-gray-200 border rounded shadow-sm lg:flex-row sm:mx-auto\">\n            <div class=\"relative lg:w-1/2\">\n              <!--        <img src=\"https://images.pexels.com/photos/3182812/pexels-photo-3182812.jpeg?auto=compress&amp;cs=tinysrgb&amp;dpr=2&amp;h=750&amp;w=1260\" alt=\"\" class=\"object-cover w-full lg:absolute h-80 lg:h-full\" />-->\n              <img :src=\"channel['prog']['image']\" alt=\"\" class=\"object-cover w-full lg:absolute h-80 lg:h-full\"/>\n              <svg class=\"absolute top-0 right-0 hidden h-full text-gray-200 lg:inline-block\" viewBox=\"0 0 20 104\"\n                   fill=\"currentColor\">\n                <polygon points=\"17.3036738 5.68434189e-14 20 5.68434189e-14 20 104 0.824555778 104\"></polygon>\n              </svg>\n            </div>\n            <div class=\"flex flex-col justify-center p-8 bg-gray-200 lg:p-16 lg:pl-10 lg:w-1/2\">\n              <div>\n                <p class=\"inline-block py-px mb-4 text-xs font-semibold tracking-wider text-teal-900 uppercase rounded-full bg-teal-accent-400\">\n                  <img :src=\"'/img/loghi/' + channel['canale']['logo']\" class=\"h-8 mb-3\" alt=\"\">\n\n                  {{ getStartTime(channel['prog']['inizio']) }} - {{ getStartTime(channel['prog']['fine']) }}\n                </p>\n              </div>\n              <h5 class=\"mb-3 text-3xl font-extrabold leading-none sm:text-4xl\">\n                {{ channel['prog']['title'] }}\n              </h5>\n              <p class=\"mb-5 text-gray-800\">\n                {{ channel['prog']['description'] | truncate(300) }}\n              </p>\n              <div class=\"flex items-center\">\n                <router-link :to=\"'/channel/'+(parseInt(index) + parseInt(10*(page-1)))\"\n                             class=\"inline-flex items-center justify-center h-12 px-6 mr-6 font-medium tracking-wide text-black bg-indigo-200 transition duration-200 rounded shadow-md focus:shadow-outline focus:outline-none\"\n                >\n                  Read more\n                </router-link>\n                <a target=\"_blank\" v-if=\"channel['prog']['trailer']\"\n                   :href=\"'https://www.youtube.com/watch?v=' + channel['prog']['trailer']['id']\" aria-label=\"\"\n                   class=\"inline-flex items-center font-semibold\">\n                  Trailer\n                  <svg class=\"inline-block w-3 ml-2\" fill=\"currentColor\" viewBox=\"0 0 12 12\">\n                    <path\n                        d=\"M9.707,5.293l-5-5A1,1,0,0,0,3.293,1.707L7.586,6,3.293,10.293a1,1,0,1,0,1.414,1.414l5-5A1,1,0,0,0,9.707,5.293Z\"></path>\n                  </svg>\n                </a>\n              </div>\n            </div>\n          </div>\n        </div>\n\n      </section>\n      <pagination v-if=\"stasera.length > 3\" @page_changed=\"load\" :n_elements=\"total_elements\"></pagination>\n    </div>\n\n\n  </div>\n</template>\n\n<script>\nimport Pagination from \"@/components/Pagination\";\n\nexport default {\n  name: 'Home',\n  components: { Pagination},\n  data: function () {\n    return {\n      canali: [],\n      stasera: [],\n      current_date: null,\n      total_elements: 1,\n      page: null\n    }\n  },\n  updated() {\n    this.page = localStorage.getItem('current_page');\n    if (this.page == null) {\n      this.page = 1;\n    }\n  },\n  beforeMount() {\n    this.load();\n  },\n  methods: {\n    load() {\n\n      const current = new Date();\n      this.current_date = `${current.getDate()}-${current.getMonth() + 1}-${current.getFullYear()}`;\n\n      const key = 'canali_' + this.current_date;\n      const key2 = 'prima_serata_' + this.current_date;\n      const key3 = 'seconda_serata_' + this.current_date;\n\n      let canali = localStorage.getItem(key);\n      let stasera = localStorage.getItem(key2);\n      if (canali != null && stasera != null) {\n        this.canali = JSON.parse(canali)\n        this.stasera = JSON.parse(stasera)\n      } else {\n        const url = \"https://epgnew.guidatvoggi.it/0\";\n        const requestOptions = {\n          method: 'POST',\n          headers: this.headers\n        };\n        fetch(url, requestOptions)\n            .then(response => response.json())\n            .then(data => {\n              this.canali = data['canali'][0]['canali']\n              localStorage.setItem(key, JSON.stringify(this.canali));\n              this.stasera = data['stasera'][0]['canali']\n              localStorage.setItem(key2, JSON.stringify(this.stasera));\n              let seconda_serata = data['seconda-serata'][0]['canali']\n              localStorage.setItem(key3, JSON.stringify(seconda_serata));\n            });\n      }\n\n      this.total_elements = this.stasera.length;\n      let page = localStorage.getItem('current_page');\n      if (page == null) {\n        page = 1;\n      }\n      this.stasera = this.stasera.splice(0 + (10 * (page - 1)), 10);\n    }\n  }\n}\n</script>"]}]}